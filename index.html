<html>
	<head>
		<title>Queer Centers</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
		
		<script src="https://thomasrosen.github.io/queer-centers/places.js"></script>
		
		<style>
		#mainMapID {
			position: absolute !important;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
		}
		</style>
	</head>
	<body>
		
		<div id="mainMapID"></div>
	
		
		<script>
			var mainMap = L.map('mainMapID').setView([51, 10], 6)
			
			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			}).addTo(mainMap)
			
			
			
			// add the markers:
			
			var geojsonFeature = []
			
			console.log("places:", places)
			
			for (let place of places) {
				geojsonFeature.push({
					type: "Feature",
					properties: {
						name: (place.name ? place.name : ""),
						lat: (place.lat ? place.lat : 0),
						lng: (place.lng ? place.lng : 0),
						address: (place.address ? place.address : ""),
						min_age: (place.min_age ? place.min_age : 0),
						max_age: (place.max_age ? place.max_age : 99999),
						website: (place.website ? place.website : ""),
						this_is_a_place_for: (place.this_is_a_place_for ? place.this_is_a_place_for : []),
						tags: (place.tags ? place.tags : [])
					},
					geometry: {
						type: "Point",
						coordinates: [place.lng, place.lat]
					}
				})
			}
			
			console.log("geojsonFeature:", geojsonFeature)
			
			var markerLayer = L.geoJSON(geojsonFeature, {
				onEachFeature: function(feature, layer) {
					if (feature.properties) {

let popupContent = `
<h1>${feature.properties.name}</h1>
<p class="address">${feature.properties.address}</p>
Webseite: <a href="${feature.properties.website}" target="_blank">${feature.properties.website}</a>
<hr>
<p>FÃ¼r Menschen von zirka ${feature.properties.min_age} bis ${feature.properties.max_age} Jahre.<br>

</p>
`
						
						console.log("popupContent:", popupContent)
						layer.bindPopup(popupContent)
					}
				}
			}).addTo(mainMap)
			
			console.log("mainMap:", mainMap)
		</script>
	</body>
</html>
